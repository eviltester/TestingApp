<!doctype html>
<html>
<head>
    <title>Table HTML Tag - JavaScript Created</title>
    <link rel="stylesheet" href="/css/testpages.css">
    <script src="../js/tables.js"></script>
    <!-- HEAD -->

</head>

<body>

<div class="page-body">


    <div class="navigation">
        <div class="page-navigation">
            <a href="../index.html">Index</a>
        </div>
        <div class="app-navigation">
            <a>Page</a>
            <a href="../page?app=dynamictableexample&t=About">About</a>
        </div>
    </div>

    <h1>Dynamic HTML TABLE Tag</h1>

    <div class="explanation">
        <p>An example of an HTML Table populated by JavaScript
        </p>
    </div>

    <div class="centered">

        <div id="tablehere">

            <style>
                table{
                    width: 100%;
                    border: 1px solid black;
                    border-collapse: collapse;
                }
                table th{
                    background-color: gainsboro;
                    font-weight: bold;
                }
                th, td {
                    border: 1px solid black;
                }
            </style>

            <table id="mytable">
                <caption>This table has information</caption>
                <tr>
                    <th>Name</th>
                    <th>Amount</th>
                </tr>
                <tr>
                    <td>Alan</td>
                    <td>12</td>
                </tr>
                <tr>
                    <td>Bob</td>
                    <td>23</td>
                </tr>
                <tr>
                    <td>Aleister</td>
                    <td>33.3</td>
                </tr>
                <tr>
                    <td>Douglas</td>
                    <td>42</td>
                </tr>

            </table>

        </div>

        <details>
            <summary>Table Data</summary>
            <div>
                <p><textarea id="jsondata"></textarea></p>
                <p>Caption: <input type="text" id="caption"/></p>
                <p>Id: <input type="text" id="tableid"/></p>
                <button class="styled-click-button" id="refreshtable" onclick="createTable()">Refresh Table</button>
            </div>
        </details>


    </div>


    <div class="page-footer">
        <p><a target="_blank" rel="noopener noreferrer" href="https://eviltester.com">EvilTester.com</a>,
            <a target="_blank" rel="noopener noreferrer" href="https://compendiumdev.co.uk">Compendium Developments</a></p>
    </div>

</div>

<script>

    document.getElementById("jsondata").value = '[{"name" : "Bob", "age" : 20}, {"name": "George", "age" : 42}]';
    document.getElementById("caption").value = "Dynamic Table";
    document.getElementById("tableid").value = "dynamictable";

    function createTable(){
        createTableFromJson(
            document.getElementById("jsondata").value,
            document.getElementById("caption").value,
            document.getElementById("tableid").value
        );
    }

    function createTableFromJson(jsonData, caption="Dynamic Table", id="tableid"){

        myTable = new TableCreator();
        myTable.setCaption(caption);
        myTable.setData(JSON.parse(jsonData));
        tableElement =  myTable.getTable({"id" : id });

        replaceTableWith(tableElement);
    }

    function replaceTableWith(aTableElement){
        var currentTable = document.querySelector("table");
        currentTable.parentElement.replaceChild( aTableElement, currentTable);
    }

    createTable();

</script>

</body>
</html>